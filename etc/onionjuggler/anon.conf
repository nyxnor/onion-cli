#!/usr/bin/env sh
## Configuration file for OnionJuggler
##
## DO NOT EDIT THIS FILE!!
##
## This file defines the default service selection as shipped in a
## release. Upgrades of OnionJuggler will modify this file.
##
## To select the service options you desire, please override these
## options in the file /etc/onionjuggler/conf.d/*.conf
##
## DO NOT EDIT THIS FILE!!
##
## Lines that begin with "## " try to explain what's going on. Lines
## that begin with just "#" are disabled commands: you can enable them
## by removing the "#" symbol.
##
## If the variable is empty (var=""), will use the default option.
## Double quote to prevent globbing and word splitting.
##  variable="value"
##
# shellcheck disable=SC2034

if test -f /usr/share/anon-gw-base-files/gateway; then
  ## Gateway
  ########## System ##########
  operating_system="anon-gateway"
  ## web: should be on the workstation
  onionjuggler_plugin="auth-server,auth-client"
  pkg_mngr_install="apt install -y"
  openssl_cmd="openssl"
  dialog_box="whiptail"
  ## this variable not used on the debian package
  requirements="tor grep sed openssl basez qrencode ${dialog_box}"

  ########## tor daemon ##########
  daemon_control="systemctl"
  tor_daemon="tor@default"
  tor_user="debian-tor"
  tor_conf_user_group="root:root"
  ## included tor configuration folder, specifically files matching '*.conf'
  tor_conf_dir="/usr/local/etc/torrc.d"
  ## manage its own unique torrc to avoid user manual modification
  tor_conf="${tor_conf_dir}/40_onionjuggler.conf"
  tor_data_dir="/var/lib/tor"
  ## pre-confiured ClientOnionAuthDir
  tor_data_dir_auth="${tor_data_dir}/authdir"

elif test -f /usr/share/anon-ws-base-files/workstation; then
  ## Workstation
  ########## System ##########
  operating_system="anon-workstation"
  ## web is the only usable plugin for Workstations
  onionjuggler_plugin="web"
  pkg_mngr_install="apt install -y"
  webserver="nginx"
  dialog_box="whiptail"
  requirements="grep sed qrencode ${dialog_box} ${webserver}"

elif ! test -f /usr/share/anon-dist/marker; then
  error_msg "anon.conf chosen but this is not an anon dist"
  exit 1
fi
