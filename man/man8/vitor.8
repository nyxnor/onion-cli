.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "vitor" "8" "September 2069" "Edit tor configuration files safely" ""
.hy
.SH NAME
.PP
vitor - Is a visudo/vidoas but for tor configuration files written in
POSIX compliant shell.
.SH SYNOPSIS
.PP
\f[B]vitor\f[R] [\f[B]-h\f[R]] [\f[B]-f\f[R] \f[I]tor_conf\f[R]]
[\f[B]-t\f[R] \f[I]tor_user\f[R]]
.PD 0
.P
.PD
.SH DESCRIPTION
.PP
*vitor** is a part of OnionJuggler, a combination of POSIX compliant
scripts helps the interaction with onion service configuration and files
to speed up usage and avoid misconfiguration.
\f[I]vitor\f[R] creates a temporary copy of the file specified on
\f[I]tor_conf\f[R] and if file doesn\[aq]t exist, the editor will create
one.
Then, it is checked if vitor is already in use on that file by testing
if lock file exists, if it does, abort.
To get the editor value, it is checked for the environment variables to
open the editor with the \f[I]SUDO_EDITOR\f[R]/\f[I]DOAS_EDITOR\f[R], if
they are empty try \f[I]VISUAL\f[R], if it is also empty try
\f[I]EDITOR\f[R], if it is also empty fallback to a unix text editor
first, the Vi(1), else try Vim(1), NVim(1), Nano(1), Pico(1), Emacs(1),
Mg(1).
If there is no available editor, fail.
After exiting the editor, the temporary copy is checked with \f[I]tor -f
temp_file --verify-config\f[R] and if it is invalid, warn the user about
the errors and press \f[I]e\f[R] to continue (loop opens the editor
again) or \f[I]x\f[R] exit which will delete the temporary file and the
lock file.
If the configuration if valid, save the temporary copy to its original
location.
.SH OPTIONS
.TP
\f[B]-h\f[R]
Display a short help message and exit.
.TP
\f[B]-f\f[R] \f[I]tor_conf\f[R]
Specify the configuration file to open.
If \f[I]tor_conf\f[R] is not set, default to /etc/tor/torrc.
.TP
\f[B]-u\f[R] \f[I]tor_user\f[R]
Specify the tor user to run the daemon as.
If \f[I]tor_user\f[R] is not set, the \f[I]tor_conf\f[R] must contain
the \[dq]User\[dq] option already.
.SH ENVIRONMENT
.TP
\f[B]SUDO_USER\f[R], \f[B]DOAS_USER\f[R]
Used to check where its not only running \f[I]vitor\f[R] as root but
also specifying the command to runuser tor.
.TP
\f[B]SUDO_EDITOR\f[R], \f[B]DOAS_EDITOR\f[R], \f[B]VISUAL\f[R], \f[B]EDITOR\f[R]
Use environment variables in the above order to define the editor, in
case any are empty, fallback to the next.
If every variable is empty, fallback to Vi(1).
.SH EXIT VALUE
.TP
\f[B]0\f[R]
Success only if the \f[I]tor_conf\f[R] has been modified and the
configuration is valid.
.TP
\f[B]1\f[R]
Fail in any invalid configuration or unmodified file.
.SH BUGS
.PP
It is not possible to edit the \[dq]User\[dq] option on the tor
configuration file.
.SH SEE ALSO
.PP
onionjuggler-cli(1), onionjuggler-tui(1), onionjuggler.conf(5), tor(1),
sh(1), regex(7), sed(1), grep(1), shellcheck(1)
.SH COPYRIGHT
.PP
Copyright \[co] 2021 OnionJuggler developers (MIT) This is free
software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH AUTHORS
Written by nyxnor (nyxnor\[at]protonmail.com).
