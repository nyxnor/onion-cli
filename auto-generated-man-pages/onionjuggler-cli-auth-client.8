.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "onionjuggler-cli-auth-server" "8" "September 2069" "Manage onion service client side authorization" ""
.hy
.SH NAME
.PP
onionjuggler-cli-auth-client - Manage onion service client side
authorization
.SH SYNOPSIS
.PP
\f[B]onionjuggler-cli-auth-client\f[R]
[\f[B]--option\f[R]<=\f[I]ARGUMENT\f[R]>]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client [--getconf]\f[R]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client [--getopt]\f[R] [\f[B]--service\f[R]
<\f[I]SERVICE\f[R]>]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]--on\f[R]]
[\f[B]--client-priv-file\f[R] <\f[I]CLIENT_PRIV_FILE\f[R]>]
[\f[B]--replace-file\f[R]]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]--on\f[R]]
[\f[B]--client\f[R] <\f[I]CLIENT\f[R]>] [\f[B]--client-priv-config\f[R]
<\f[I]CLIENT_PRIV_CONFIG\f[R]>] [\f[B]--replace-file\f[R]]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]--on\f[R]]
[\f[B]--client\f[R] <\f[I]CLIENT\f[R]>] [\f[B]--client-priv-key\f[R]
<\f[I]CLIENT_PRIV_KEY\f[R]>] [\f[B]--onion\f[R] <\f[I]ONION\f[R]>]
[\f[B]--replace-file\f[R]]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]--off\f[R]]
[\f[B]--client\f[R] <\f[I]CLIENT\f[R]>]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]--list\f[R]]
.PD 0
.P
.PD
\f[B]onionjuggler-cli-auth-client\f[R] [\f[B]-h\f[R]|\f[B]--help\f[R]]
.SH DESCRIPTION
.PP
\f[B]onionjuggler-cli-atuh-client\f[R] helps manage client side onion
authorizations.
.SH OPTIONS
.SS VARIABLES
.TP
\f[B][VAR]\f[R]
Variable is required.
.TP
\f[B]<\f[BI]VAR\f[B]>\f[R]
Variable is optional.
.TP
\f[B]\[at]all\f[R], \f[B]\[at]all\f[R]
Include all available services or clients.
.TP
\f[B]SERV1,SERV2...\f[R], \f[B]CLIENT1,CLIENT2,...\f[R], \f[B]ONION1,ONION2\f[R]
List enabled option.
e.g: ssh,xmpp,irc or alice,bob.
.TP
\f[B]VERSION\f[R]
Onion service version.
Currently only valid value is 3.
.TP
\f[B]SERV\f[R]
Service name.
String format.
.TP
\f[B]VIRTPORT\f[R]
Virtual port.
Integer format.
.TP
\f[B]TARGET\f[R]
Target socket.
TCP needs to be specified, the format is \f[I]addr:port\f[R].
Abscense of the address will bind to localhost using the address
\f[I]127.0.0.1\f[R] for uniformity.
Abscense of target and will use the same port as the virtual port,
specifying just the port will bind to localhost using the address
\f[I]127.0.0.1\f[R] for uniformity.
Unix target is handled by the code using the format \f[I]unix:path\f[R]
and does not require manual selection.
Integer format.
.TP
\f[B]ONION\f[R]
Onion address of the authenticated service for the client to connect to.
Only accepted format is for onion v3 addresses, which contains 56
characters using the base32 format with the range \f[I]a-z2-7\f[R] and
ending with (dot)onion.
String format.
.TP
\f[B]main\f[R] [\f[B]--option\f[R]<=\f[I]ARGUMENT\f[R]>]
Commands that accept arguments can be specified as follow:
\f[I]--service ssh\f[R] OR \f[I]--service \[dq]ssh nextcloud\[dq]\f[R]
OR \f[I]--service=ssh,nextcloud\f[R]
.TP
\f[B]ssh\f[R], \f[B]xmpp\f[R], \f[B]nextcloud\f[R]
Example of onion services directory names.
.SS ARGUMENTS
.TP
\f[B]--getconf\f[R]
Print configuration in the format \f[B]key\f[R]=\[dq]\f[I]val\f[R]\[dq].
.TP
\f[B]--getopt\f[R]
Print option parsing results.
.PP
\f[B]--on\f[R] \f[B]--client-priv-file\f[R] <\f[I]CLIENT_PRIV_FILE\f[R]>
\f[B]--replace-file\f[R]
.PD 0
.P
.PD
\f[B]--on\f[R] \f[B]--client\f[R] <\f[I]CLIENT\f[R]>
\f[B]--client-priv-config\f[R] <\f[I]CLIENT_PRIV_CONFIG\f[R]>
\f[B]--replace-file\f[R]
.PD 0
.P
.PD
.TP
\f[B]--on\f[R] \f[B]--client\f[R] <\f[I]CLIENT\f[R]> \f[B]--onion\f[R] <\f[I]ONION\f[R]> \f[B]--client-priv-key\f[R] <\f[I]CLIENT_PRIV_KEY\f[R]> \f[B]--replace-file\f[R]
Authenticate as a client to an onion serivce.
If the client private keys is not provided, a new key pair of public and
private keys will be generated, keys are sent to stdout and you should
send to the onion service operator.
Add a $ONION.auth_private to ClientOnionAuthDir.
File(s) modified: ClientOnionAuthDir.
.RS
.IP
.nf
\f[C]
onionjuggler-cli-auth-client --on --client-priv-file /home/user/alice.auth_private
onionjuggler-cli-auth-client --on --client alice --client-priv-config fe4avn4qtxht5wighyii62n2nw72spfabzv6dyqilokzltet4b2r4wqd:descriptor:x25519:UBVCL52FL6IRYIOLEAYUVTZY3AIOM
onionjuggler-cli-auth-client --on --client alice --onion fe4avn4qtxht5wighyii62n2nw72spfabzv6dyqilokzltet4b2r4wqd.onion --client-priv-key UBVCL52FL6IRYIOLEAYUVTZY3AIOMDI3AIFBAALZ7HJOHIJFVBIQ
onionjuggler-cli-auth-client --on --client alice --onion fe4avn4qtxht5wighyii62n2nw72spfabzv6dyqilokzltet4b2r4wqd.onion
\f[R]
.fi
.RE
.TP
\f[B]--off\f[R] \f[B]--client\f[R] <\f[I]CLIENT1,CLIENT2,...\f[R]>
Deauthenticate from a remote onion serivce.
Remove the $ONION.auth_private file from ClientOnionAuthDir.
File(s) modified: ClientOnionAuthDir/.
.RS
.IP
.nf
\f[C]
onionjuggler-cli-auth-client --off --onion fe4avn4qtxht5wighyii62n2nw72spfabzv6dyqilokzltet4b2r4wqd.onion
onionjuggler-cli-auth-client --off --onion fe4avn4qtxht5wighyii62n2nw72spfabzv6dyqilokzltet4b2r4wqd.onion,yyyzxhjk6psc6ul5jnfwloamhtyh7si74b47a3k2q3pskwwxrzhsxmad.onion
\f[R]
.fi
.RE
.TP
\f[B]--list\f[R]
List authentication files and the respective private keys from
ClientOnionAuthDir.Useful when removing files and you want to see which
onions you are already authenticated with.
File(s) modified: none.
.RS
.IP
.nf
\f[C]
onionjuggler-cli-auth-client --list
\f[R]
.fi
.RE
.TP
\f[B]-h\f[R], \f[B]--help\f[R]
Display the script help message.
Abscense of any parameter will also have the same effect.
.RS
.IP
.nf
\f[C]
onionjuggler-cli-auth-client -h
onionjuggler-cli-auth-client --help
\f[R]
.fi
.RE
.TP
\f[B]-R\f[R], \f[B]--restart\f[R], \f[B]-r\f[R], \f[B]--reload\f[R]
Signal tor daemon to restart or reload after the CLI edits tor\[aq]s
configuration files.
(Default: reload)
.SH FILES
.TP
\f[B]/usr/share/onionjuggler/defaults.sh\f[R]
Default library
.TP
\f[B]/etc/onionjuggler/onionjuggler.conf\f[R]
Default system configuration file.
.TP
\f[B]/etc/onionjuggler/conf.d/*.conf\f[R]
Local configuration files that overrrite the default one.
.SH EXIT VALUE
.TP
\f[B]0\f[R]
Success
.TP
\f[B]>0\f[R]
Fail
.SH BUGS
.PP
Bugs you may find.
First search for related issues on
https://github.com/nyxnor/onionjuggler/issues, if not solved, open a new
one.
.SH SEE ALSO
.PP
onionjuggler-tui(8), onionjuggler.conf(5), vitor(8), tor(1), sh(1),
regex(7), sed(1), grep(1), shellcheck(1)
.SH COPYRIGHT
.PP
Copyright \[co] 2021 OnionJuggler developers (MIT) This is free
software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH AUTHORS
Written by nyxnor (nyxnor\[at]protonmail.com).
